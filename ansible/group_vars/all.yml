---
# Cloudflare tunnel configuration
tunnel_name: "cityforge-tunnel"
tunnel_uuid: "your-tunnel-uuid-here"

# Tunnel credentials (JSON content from Cloudflare dashboard)
# This should be encrypted with ansible-vault in production
tunnel_credentials: |
  {
    "AccountTag": "your-account-tag",
    "TunnelSecret": "your-tunnel-secret",
    "TunnelID": "your-tunnel-id"
  }

# Tunnel ingress rules
tunnel_ingress:
  - hostname: "app.yourdomain.com"
    service: "http://localhost:3000"
  - hostname: "api.yourdomain.com"
    service: "http://localhost:5000"
  - hostname: "admin.yourdomain.com"
    service: "http://localhost:3000"
    path: "/admin/*"
  - service: "http_status:404" # Catch-all rule (required)

# Cloudflared configuration
cloudflared_log_level: "info" # debug, info, warn, error
cloudflared_log_file: "/var/log/cloudflared/cloudflared.log"
cloudflared_metrics_port: 8080
cloudflared_no_autoupdate: true

# System configuration
enable_firewall: true
cloudflared_version: "2024.10.0"

# Additional tunnel options
tunnel_options:
  grace_period: "30s"
  hello_world: false
  protocol: "http2"
  retries: 5
  heartbeat_interval: "10s"
  max_heartbeats: 10
