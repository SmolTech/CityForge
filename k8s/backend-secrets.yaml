# Backend Secrets
# IMPORTANT: Before applying this file:
# 1. Generate secure JWT secret: python -c "import secrets; print(secrets.token_hex(32))"
# 2. Generate secure Flask secret: python -c "import secrets; print(secrets.token_hex(32))"
# 3. Base64 encode both secrets: echo -n "your_secret_here" | base64
# 4. Replace the placeholders below with your base64-encoded secrets
# 5. Store the original secrets securely for backup

apiVersion: v1
kind: Secret
metadata:
  name: cityforge-backend-secrets
  namespace: cityforge
  labels:
    app: cityforge-backend
type: Opaque
data:
  # Replace with base64-encoded JWT secret key
  # Generate: python -c "import secrets; print(secrets.token_hex(32))"
  # Then encode: echo -n "your_jwt_secret" | base64
  jwt_secret_key: REPLACE_WITH_BASE64_ENCODED_JWT_SECRET

  # Replace with base64-encoded Flask secret key
  # Generate: python -c "import secrets; print(secrets.token_hex(32))"
  # Then encode: echo -n "your_flask_secret" | base64
  secret_key: REPLACE_WITH_BASE64_ENCODED_FLASK_SECRET

---
# Example commands to generate and encode secrets:
#
# 1. Generate JWT secret:
#    JWT_SECRET=$(python -c "import secrets; print(secrets.token_hex(32))")
#    echo "JWT Secret: $JWT_SECRET"
#    JWT_SECRET_B64=$(echo -n "$JWT_SECRET" | base64)
#    echo "JWT Secret (base64): $JWT_SECRET_B64"
#
# 2. Generate Flask secret:
#    FLASK_SECRET=$(python -c "import secrets; print(secrets.token_hex(32))")
#    echo "Flask Secret: $FLASK_SECRET"
#    FLASK_SECRET_B64=$(echo -n "$FLASK_SECRET" | base64)
#    echo "Flask Secret (base64): $FLASK_SECRET_B64"
#
# 3. Apply the secret:
#    kubectl apply -f backend-secrets.yaml
#
# 4. Verify the secret was created:
#    kubectl get secret cityforge-backend-secrets -n cityforge
#    kubectl describe secret cityforge-backend-secrets -n cityforge
